/*! 
* Data Aquarium Framework - Membership and Membership Manager
* Copyright 2008-2017 Code On Time LLC; Licensed MIT; http://codeontime.com/license
*/
(function(){Type.registerNamespace("Web");var i=Web.Membership=function(){Web.Membership.initializeBase(this);this._membershipBar=null;this._intervalId=null;Web.Membership._instance=this;this._displayLogin=!0},t=Web.MembershipResources,n=window;i.prototype={initialize:function(){i.callBaseMethod(this,"initialize");i._instance||(i._instance=this);this._loginButtonClickHandler=Function.createDelegate(this,this._loginButtonClick);this._loginDialogMouseOverHandler=Function.createDelegate(this,this._loginDialogMouseOver);this._loginDialogMouseOutHandler=Function.createDelegate(this,this._loginDialogMouseOut);this._login_CompletedHandler=Function.createDelegate(this,this._login_Completed);this._method_FailureHandler=Function.createDelegate(this,this._method_Failure);this._textBoxKeyPressHandler=Function.createDelegate(this,this._textBoxKeyPress);this._body_keydownDelegate=Function.createDelegate(this,this._body_keydown);this._body_mousemoveDelegate=Function.createDelegate(this,this._body_mousemove);$addHandler(document.body,"keydown",this._body_keydownDelegate);$addHandler(document.body,"mousemove",this._body_mousemoveDelegate);this._window_beforeUnloadDelegate=Function.createDelegate(this,this._window_beforeUnload);$addHandler(window,"beforeunload",this._window_beforeUnloadDelegate)},dispose:function(){this.idleInterval(!1);this._disposeIdentityResources();$removeHandler(window,"beforeunload",this._window_beforeUnloadDelegate);$removeHandler(document.body,"keydown",this._body_keydownDelegate);$removeHandler(document.body,"mousemove",this._body_mousemoveDelegate);this._loginButton&&$clearHandlers(this._loginButton);this._loginDialog&&$clearHandlers(this._loginDialog);this._userName&&$clearHandlers(this._userName);this._password&&$clearHandlers(this._password);delete this._membershipBar;delete this._bookmarkBar;this._hideHistory();i.callBaseMethod(this,"dispose")},get_membershipBar:function(){return this._membershipBar},get_isLoginDialogVisible:function(){return this._isLoginDialogVisible},set_isLoginDialogVisible:function(n){this._isLoginDialogVisible=n},get_displayRememberMe:function(){return this._displayRememberMe!=!1},set_displayRememberMe:function(n){this._displayRememberMe=n},get_rememberMeSet:function(){return this._rememberMeSet==!0},set_rememberMeSet:function(n){this._rememberMeSet=n},get_displayLogin:function(){return this._displayLogin},set_displayLogin:function(n){this._displayLogin=n},get_displayPasswordRecovery:function(){return this._displayPasswordRecovery!=!1},set_displayPasswordRecovery:function(n){this._displayPasswordRecovery=n},get_displaySignUp:function(){return this._displaySignUp!=!1},set_displaySignUp:function(n){this._displaySignUp=n},get_displayMyAccount:function(){return this._displayMyAccount},set_displayMyAccount:function(n){this._displayMyAccount=n},get_displayHelp:function(){return this._displayHelp},set_displayHelp:function(n){this._displayHelp=n},get_baseUrl:function(){return this._baseUrl||__baseUrl},set_baseUrl:function(n){this._baseUrl=n},get_servicePath:function(){return this._servicePath||__servicePath},set_servicePath:function(n){this._servicePath=n},get_welcome:function(){return String.isNullOrEmpty(this._welcome)?t.Bar.Welcome:this._welcome},set_welcome:function(n){this._welcome=n},get_user:function(){return this._user},set_user:function(n){this._user=n},get_enablePermalinks:function(){return this._enablePermalinks==!0},set_enablePermalinks:function(n){this._enablePermalinks=n},get_enableHistory:function(){return this._enableHistory==!0},set_enableHistory:function(n){this._enableHistory=n},get_isAuthenticated:function(){return this._isAuthenticated},set_isAuthenticated:function(n){this._isAuthenticated=n},get_commandLine:function(){return this._commandLine},set_commandLine:function(n){this._commandLine=n},showLoginDialog:function(){this.hideLoginDialog()},hideLoginDialog:function(){this._intevalId&&(n.clearInterval(this._intervalId),this._intervalId=null)},addPermalink:function(t,i){if(this.get_enablePermalinks()||this.get_enableHistory()){var r=location.pathname+"?"+t;this._savePermalinkParams={link:r,html:$app.htmlEncode(i)};n.setTimeout("Web.Membership._instance._savePermalink()",500);Sys.UI.DomElement.getVisible(this._membershipBar)||this._encodePermalink_Success("")}},_savePermalink:function(){Sys.Net.WebServiceProxy.invoke(this.get_servicePath(),"SavePermalink",!1,this._savePermalinkParams)},showPermalink:function(){if(!this._savePermalinkParams||String.isNullOrEmpty(this._savePermalinkParams.html)){$appfactory.alert(t.Messages.PermalinkUnavailable);return}this.encodePermalink(this._savePermalinkParams.link,Function.createDelegate(this,this._encodePermalink_Success))},encodePermalink:function(n,t){t||(t=function(n){location.href=n});Sys.Net.WebServiceProxy.invoke(this.get_servicePath(),"EncodePermalink",!1,{link:n,rooted:!0},t,Function.createDelegate(this,this._onMethodFailed))},showHistory:function(){this._historyDiv||Sys.Net.WebServiceProxy.invoke(this.get_servicePath(),"ListAllPermalinks",!1,null,Function.createDelegate(this,this._showHistory_Success),Function.createDelegate(this,this._method_Failure))},_focusHistory:function(){var n=$get(this.get_id()+"_RotateHistory");n&&n.focus()},_renderHistory:function(){var h=$appfactory.clientBounds(),a=$appfactory.scrolling(),f=new Sys.StringBuilder,u,r,v,n,i,s;f.appendFormat('<div onclick="$find(\'{0}\')._hideHistory()" style="width:{1}px;height:{2}px;">',this.get_id(),h.width,h.height);u=this._historyData.length;u>10&&(u=10);var c=0,l=0,o=50,e=30;for(u<=3?(o=65,e=30):u<=6&&(o=65,e=30),r=u-1;r>=0;r--)v=this._historyData[r][1],f.appendFormat('<div style="position:absolute;background-color:#333333;"><\/div><div id="{0}_Card{1}" onclick="$find(\'{0}\')._selectHistory({1});return false;" style="position:absolute;left:{2}px;top:{3}px;" onmouseover="if(this._Activated!=99){{this.style.zIndex=600001;this._Activated=99;var s=this.previousSibling;s.style.zIndex=600000;s.style.backgroundColor=\'black\'}}" onmouseout="this.style.zIndex=\'{4}\';this._Activated=0;var s=this.previousSibling;s.style.zIndex=\'{4}\';s.style.backgroundColor=\'#333333\'">',this.get_id(),r,c,l,Sys.Browser.agent==Sys.Browser.InternetExplorer&&Sys.Browser.version>=9?-1:"auto"),f.append(v),f.append("<\/div>"),r==0&&f.appendFormat('<a id="{0}_RotateHistory" class="RotateHistory" href="javascript:" onclick="$find(\'{0}\')._rotateHistory(event);return false;"><div id="{0}_RotateButton" title="{3}" style="position:absolute;z-index:600002;left:{1}px;top:{2}px;" class="RotateHistory">&nbsp;<\/div><\/a>',this.get_id(),c+110,l-15,t.Bar.RotateHistory),c+=o,l+=e;for(f.append("<\/div>"),this._historyDiv.innerHTML=f.toString(),n=$get(this.get_id()+"_Card0"),i=$appfactory.bounds(n),o=Math.floor((h.width-(i.x+i.width))/2),e=this._historyOffsetTop?this._historyOffsetTop:Math.floor((h.height-(i.y+i.height))/2),this._historyOffsetTop=e,n=$get(this.get_id()+"_RotateButton"),n.style.left=n.offsetLeft+o+"px",n.style.top=n.offsetTop+e+"px",u==1&&(n.style.width="1px",n.style.height="1px"),r=0;r<u;r++)n=$get(this.get_id()+"_Card"+r),n.style.left=n.offsetLeft+o+"px",n.style.top=n.offsetTop+e+"px",i=$appfactory.bounds(n),i.x+=10-a.x,i.y+=4-a.y,s=n.previousSibling,s.style.left=i.x+"px",s.style.top=i.y+"px",s.style.width=i.width-13+"px",s.style.height=i.height-0+"px"},_selectHistory:function(n){this.encodePermalink(this._historyData[n][0])},_hideHistory:function(){this._historyModalPopup&&(this._historyModalPopup.hide(),this._historyDiv&&(this._historyDiv.parentNode.removeChild(this._historyDiv),delete this._historyDiv),this._historyModalPopup.dispose(),delete this._historyModalPopup)},_rotateHistory:function(n){var i=this._historyData[0],t;Array.removeAt(this._historyData,0);Array.add(this._historyData,i);this._renderHistory();this._focusHistory();try{t=new Sys.UI.DomEvent(n);t.stopPropagation();t.preventDefault()}catch(r){}},_showHistory_Success:function(n){if(n.length==0){$appfactory.alert(t.Messages.HistoryUnavailable);return}this._historyData=n;var i=this._historyDiv=document.createElement("div");document.body.appendChild(i);i.id=this.get_id()+"_HistoryPanel";i.className="History";this._historyOffsetTop=null;this._renderHistory();this._historyModalPopup=$create(AjaxControlToolkit.ModalPopupBehavior,{PopupControlID:i.id,DropShadow:!1,BackgroundCssClass:"ModalBackground"},null,null,$get(this.get_id()+"_HistoryLink"));this._historyModalPopup.show();this._focusHistory()},_encodePermalink_Success:function(n){var i=$get(this.get_id()+"_Permalink"),r=$get(this.get_id()+"_AddToFavorites"),u=$get(this.get_id()+"_CancelFavorites"),t=!Sys.UI.DomElement.getVisible(i.parentNode);Sys.UI.DomElement.setVisible(i.parentNode,t);Sys.UI.DomElement.setVisible(r.parentNode,t);Sys.UI.DomElement.setVisible(u.parentNode,t);Sys.UI.DomElement.setVisible(this._membershipBar,!t);t&&(i.value=n);i.parentNode.title=this._savePermalinkParams.html.replace(/<div class="Value">/g," = ").replace(/(\s*<.+?>\s*)+/g,"\r\r").trim().replace(/&\w+;/g,"").replace(/(\r\r)+/g,"; ").replace(/;\s*=/g," = ").replace(/=\s*;/g," = ")},_addToFavorites:function(){var t;this._encodePermalink_Success("");var u=$get(this.get_id()+"_Permalink"),i=u.parentNode.title,r=u.value;n.sidebar?n.sidebar.addPanel(i,r,""):n.opera&&n.print?(t=document.createElement("a"),t.setAttribute("href",r),t.setAttribute("title",i),t.setAttribute("rel","sidebar"),t.click()):document.all&&n.external.AddFavorite(r,i)},changeLoginDialogVisibility:function(t,i){if(this._intevalId&&(n.clearInterval(this._intevalId),this._intevalId=null),i)this._intevalId=n.setInterval(String.format('$find("{0}").changeLoginDialogVisibility({1})',this.get_id(),t),i);else if(t!=this.get_isLoginDialogVisible()){var r=$get("LoginControlsRow",this._membershipBar);r&&(t?Sys.UI.DomElement.removeCssClass(this._loginDialog,"LoginDialogCollapsed"):Sys.UI.DomElement.addCssClass(this._loginDialog,"LoginDialogCollapsed"),Sys.UI.DomElement.setVisible(r,t));!t||document.activeElement&&document.activeElement.id=="Password"||this._userName.focus();this.set_isLoginDialogVisible(t);t&&Web.HoverMonitor._instance.close()}},get_authenticationEnabled:function(){return this._authenticationEnabled==null||this._authenticationEnabled==!0},set_authenticationEnabled:function(n){this._authenticationEnabled=n},get_idleTimeout:function(){return this._idleTimeout==null?0:this._idleTimeout},set_idleTimeout:function(n){this._idleTimeout=n},get_cultures:function(){return this._cultures},set_cultures:function(n){this._cultures=n},get_cultureName:function(){var t=this._cultureList,n;if(t)for(n=0;n<t.length;n++)if(t[n][2]=="True")return t[n][1];return null},changeCulture:function(n){var t=new Date;t.setDate(t.getDate()+14);document.cookie=String.format(".COTCULTURE={0}; expires={1}; path=/",n,t.toUTCString());location.replace($appfactory.unanchor(location.href))},_idle:function(){var u,r,n,i;for(Web.HoverMonitor._instance.close(),u=Sys.Application.getComponents(),r=u.length-1;r>=0;r--)n=u[r],Web.DataView.isInstanceOfType(n)&&(n.get_isModal()?n.endModalState("Cancel"):n.get_lookupField()&&n.hideLookup());this._protecting=!0;i=this._idleDialog=document.createElement("div");i.id=this.get_id()+"$IdentityValidation";document.body.appendChild(i);i.innerHTML=String.format('<div class="ModalPlaceholder FixedDialog UserIdle"><div class="Text">{1}<\/div><div class="Buttons"><button onclick="$find(\'{0}\').logout();return false;" >{2}<\/button><\/div><\/div>',this.get_id(),t.Bar.UserIdle,t.Bar.LoginLink);this._identityModalPopup=$create(AjaxControlToolkit.ModalPopupBehavior,{PopupControlID:i.id,DropShadow:!0,BackgroundCssClass:"ModalBackground"},null,null,this._membershipBar.getElementsByTagName("a")[0]);this._identityModalPopup.show()},idle:function(){var n=(new Date).getTime()-this._lastActivity>this.get_idleTimeout()&&!this._protecting&&$app.loggedIn();return n&&this._idle(),n},_disposeIdentityResources:function(){this._identityModalPopup&&(this._identityModalPopup.dispose(),this._idleDialog.parentNode.removeChild(this._idleDialog),delete this._idleDialog,this._identityModalPopup=null)},_updateLastActivity:function(){this._lastActivity=new Date},_body_keydown:function(n){this._updateLastActivity();this._historyDiv&&(n.keyCode==Sys.UI.Key.esc?(n.preventDefault(),this._hideHistory()):n.keyCode==Sys.UI.Key.tab?(n.preventDefault(),this._rotateHistory()):n.keyCode==Sys.UI.Key.enter&&(n.preventDefault(),this._selectHistory(0)))},_body_mousemove:function(){this._updateLastActivity()},_window_beforeUnload:function(){this._protecting&&(this._protecting=!1,this._disposeIdentityResources(),this.logout())},loggedIn:function(){var n=$app.loggedIn();return n||String.isNullOrEmpty(this.get_user())||(n=!0),n},idleInterval:function(t){var i=this;i._idleIntervalId&&(clearInterval(i._idleIntervalId),i._idleIntervalId=null);t&&i.get_idleTimeout()>0&&(i._idleIntervalId=n.setInterval(function(){i.idle()},6e4))},updated:function(){var r,u,e,o,s,h,c,f,y;if(i.callBaseMethod(this,"updated"),r=t.Bar,u=this,u.idleInterval(!0),u._updateLastActivity(),!String.isNullOrEmpty(u.get_cultures())){u._cultureList=[];var p=String.format("Detect,Detect|{0}|False;{1}",t.Bar.AutoDetectLanguageOption,u.get_cultures()),l=p.split(/;/),v="Membership$Cultures",a=[];for(e=0;e<l.length;e++)String.isBlank(l[e])||(o=l[e].split(/\|/),Array.add(u._cultureList,o),s=new Web.Item(v,o[1]),o[2]=="True"&&s.set_selected(!0),s.set_script(String.format("$find('{0}').changeCulture('{1}');",u.get_id(),o[0])),Array.add(a,s),e==0&&Array.add(a,new Web.Item));$registerItems(v,a,Web.HoverStyle.ClickAndStay,Web.PopupPosition.Right,Web.ItemDescriptionStyle.None)}h=document.createElement("div");h.className="MembershipBarPlaceholder";document.body.insertBefore(h,document.body.childNodes[0]);u._membershipBar=$get("Membership_Login");c=u.loggedIn();u._membershipBar||(u._membershipBar=document.createElement("div"),document.body.childNodes.length>0?document.body.insertBefore(u._membershipBar,document.body.childNodes[0]):document.body.appendChild(u._membershipBar),f=new Sys.StringBuilder,u._membershipBar.id="Membership_Login",u._membershipBar.className="MembershipBar",!u._cultureList||__tf!=4||f.append(String.format('<div style="float:right" class="CultureLink"> | <a href="javascript:" onclick="$toggleHover();return false;" title="{1}" onfocus="$showHover(this, \'Membership$Cultures\', \'CultureSelector\', 1)" onblur="$hideHover(this)" onmouseover="$showHover(this, \'Membership$Cultures\', \'CultureSelector\', 1)" onmouseout="$hideHover(this)">{0}<\/a><\/div>',this.get_cultureName(),r.ChangeLanguageToolTip)),this.get_displayHelp()&&f.append(String.format('<div style="float:right" class="HelpLink"> | <a href="javascript:" onclick="$find(&quot;{0}&quot;).help();return false;">{1}<\/a><\/div>',this.get_id(),r.HelpLink)),!c&&this.get_authenticationEnabled()?this.get_displayLogin()&&f.append(String.format('<table id="LoginDialog" cellpadding="0" class="LoginDialog"><tr><td id="Anchor"><a href="javascript:" onfocus="$find(&quot;{0}&quot;).changeLoginDialogVisibility(true);return false" >{1}<\/a>{2}<\/td><\/tr><tr id="LoginControlsRow"><td id="LoginControls"><table><tr><td align="right" nowrap="nowrap">{3}<\/td><td><input type="text" id="UserName" size="20" value="" /><\/td><\/tr><tr><td align="right" nowrap="nowrap">{4}<\/td><td><input type="password" id="Password" size="20" /><\/td><\/tr>'+(this.get_displayRememberMe()?String.format('<tr><td align="right" colspan="2"><input type="checkbox" id="RememberMe"{0}/><label for="RememberMe">{1}<\/label><\/td><\/tr>',this.get_rememberMeSet()?' checked="checked"':"",r.RememberMe):"")+(this.get_displayPasswordRecovery()?'<tr><td>&nbsp;<\/td><td align="right" nowrap="nowrap"><a href="javascript:" onclick="$find(&quot;{0}&quot).passwordRecovery();return false;" id="PasswordRecovery">{6}<\/a><\/td><\/tr>':"")+(this.get_displaySignUp()?'<tr><td>&nbsp;<\/td><td align="right" nowrap="nowrap"><a href="javascript:" onclick="$find(&quot;{0}&quot).signUp();return false;" id="SignUp">{7}<\/a><\/td><\/tr>':"")+'<tr><td>&nbsp;<\/td><td align="right"><button id="Login">{5}<\/button><\/td><\/tr><\/table><\/td><\/tr><\/table>',this.get_id(),r.LoginLink,r.LoginText,r.UserName,r.Password,r.LoginButton,r.ForgotPassword,r.SignUp)):f.append(String.format('<table id="LoginDialog" cellpadding="0" class="LoginDialog LoginDialogCollapsed"><tr><td>'+(this.get_welcome()&&!String.isBlank(this.get_welcome())?String.localeFormat(this.get_welcome(),this.get_user(),new Date)+(this.get_authenticationEnabled()?" | ":""):"")+(this.get_displayMyAccount()?'<a id="MyAccount" href="javascript:" onclick="$find(&quot;{0}&quot;).myAccount();return false;">{1}<\/a> | ':"")+(this.get_authenticationEnabled()?'<a href="javascript:" onclick="$find(&quot;{0}&quot;).logout();return false;">{2}<\/a>':"")+"<\/td><\/tr><\/table>",this.get_id(),r.MyAccount,r.LogoutLink)),this._membershipBar.innerHTML=f.toString(),c&&(this.get_enablePermalinks()||this.get_enableHistory())&&(this._bookmarkBar=document.createElement("div"),this._bookmarkBar.className="BookmarkBar",h.appendChild(this._bookmarkBar),f=new Sys.StringBuilder,f.append('<table class="Frame"><tr>'),this.get_enableHistory()&&f.appendFormat('<td><a id="{0}_HistoryLink" href="javascript:" onclick="$find(\'{0}\').showHistory();return false" title="{2}">{1}<\/a><\/td>',this.get_id(),r.History,r.HistoryToolTip),this.get_enableHistory()&&this.get_enablePermalinks()&&f.append("<td>|<\/td>"),this.get_enablePermalinks()&&f.appendFormat('<td><a href="javascript:" onclick="$find(\'{0}\').showPermalink();return false" title="{4}">{1}<\/a><\/td><td style="display:none"><input id="{0}_Permalink" type="text" onfocus="this.select();"/><\/td><td style="display:none"><a id="{0}_AddToFavorites" href="javascript:" onclick="$find(\'{0}\')._addToFavorites();return false" class="AddBookmark" title="{2}">&nbsp;<\/a><\/td><td style="display:none"><a id="{0}_CancelFavorites" href="javascript:" onclick="$find(\'{0}\').showPermalink();return false" class="CancelBookmark" title="{3}">&nbsp;<\/a><\/td>',this.get_id(),r.Permalink,r.AddToFavorites,r.HelpCloseButton,r.PermalinkToolTip),f.append("<\/tr><\/table>"),this._bookmarkBar.innerHTML=f.toString()));document.body.style.paddingTop="0px";!c&&this.get_displayLogin()&&(this._loginDialog=$get("LoginDialog",this._membershipBar),y=$appfactory.bounds(this._loginDialog),this._loginDialog.style.width=y.width+"px",$get("LoginControlsRow",this._loginDialog)&&$addHandlers(this._loginDialog,{mouseover:this._loginDialogMouseOverHandler,mouseout:this._loginDialogMouseOutHandler},this),this._loginButton=$get("Login",this._membershipBar),this._loginButton&&$addHandler(this._loginButton,"click",this._loginButtonClickHandler),$(this._membershipBar).find("input").keyup(function(n){n.which==13&&u.login()}),this._userName=$get("UserName",this._membershipBar),this._userName&&$addHandler(this._userName,"keypress",this._textBoxKeyPressHandler),this._password=$get("Password",this._membershipBar),this._password&&$addHandler(this._password,"keypress",this._textBoxKeyPressHandler),this._rememberMe=$get("RememberMe",this._membershipBar),this.changeLoginDialogVisibility(n.location.href.match(/\?ReturnUrl=(.+)$/)!=null))},_login_Completed:function(i){var r,u;this._wait(!1);i?(u=n.location.href.match(/\?ReturnUrl=(.+)$/),setTimeout(function(){$app._navigated=!0;n.location.replace($appfactory.unanchor(u?unescape(u[1]):n.location.href))})):(r=this,$appfactory.alert(t.Messages.InvalidUserNameAndPassword,function(){$appfactory.mobile||r.changeLoginDialogVisibility(!0);r._userName.focus()}))},_method_Failure:function(n,t,i){this._wait(!1);$appfactory.alert(String.format("Method {0} has failed. {1}",i,n.get_message()))},_loginButtonClick:function(){this.login()},_loginDialogMouseOver:function(){this.changeLoginDialogVisibility(!0,50)},_loginDialogMouseOut:function(){this.changeLoginDialogVisibility(!1,500)},_textBoxKeyPress:function(n){n.charCode==Sys.UI.Key.enter&&(n.preventDefault(),this.login());n.charCode==Sys.UI.Key.esc&&(n.preventDefault(),this.set_isLoginDialogVisible(!0),this.changeLoginDialogVisibility(!1))},login:function(){var n=this,i;if(n.loggedIn(),!n._waitDataView||!n._waitDataView._busy())if(this._userName&&this._password){if(i=/^\s*$/,i.exec(this._userName.value)){$appfactory.alert(t.Messages.BlankUserName,function(){n.set_isLoginDialogVisible(!1);n._userName.focus()});return}if(i.exec(this._password.value)){this.set_isLoginDialogVisible(!1);$appfactory.alert(t.Messages.BlankPassword,function(){n.set_isLoginDialogVisible(!1);n._password.focus()});return}this._wait(!0);$app.login(this._userName.value,this._password.value,this._rememberMe!=null&&this._rememberMe.checked,function(){n._login_CompletedHandler(!0)},function(){n._login_CompletedHandler(!1)})}else $appfactory.alert("UserName and/or Password elements are not found in the Memership_Login")},_wait:function(n){var t=this._waitDataView;t||(this._waitDiv=$("<div/>"),t=this._waitDataView=$create(Web.DataView,{},null,null,this._waitDiv[0]));t._busy(n)},logout:function(){this._protecting=!1;$app.logout(function(){setTimeout(function(){$app._navigated=!0;location.reload()})})},signUp:function(){this.changeLoginDialogVisibility(!1);Web.DataView.showModal($get("SignUp",this.get_membershipBar()),"MyProfile","signUpForm","New","signUpForm",this.get_baseUrl(),this.get_servicePath())},passwordRecovery:function(){this.changeLoginDialogVisibility(!1);Web.DataView.showModal($get("PasswordRecovery",this.get_membershipBar()),"MyProfile","passwordRequestForm","New","passwordRequestForm",this.get_baseUrl(),this.get_servicePath())},myAccount:function(){Web.DataView.showModal($get("MyAccount",this.get_membershipBar()),"MyProfile","myAccountForm","Edit","myAccountForm",this.get_baseUrl(),this.get_servicePath())},helpUrl:function(){var i=n.location.pathname.split(/\//),r=this.get_baseUrl().split(/\//),u=i.slice(0,1).join("/"),t=i.slice(i.length-r.length).join("/");return t.match(/^\//)&&(t=t.substr(1)),(u||"/")+"help/"+t},help:function(i){var l,u,o,s,f,r,c,h,e;if(typeof __settings!="undefined"&&__settings.help){l=this;u=l.helpUrl();$.ajax(u,{success:function(t){u=t.match(/404 Not Found/)?__baseUrl+"help":u;$app.touch?$app.touch.navigate({href:u}):n.open(u,"_blank")}});return}if(o=n.location.pathname,s=this.get_baseUrl()=="./"?o.substr(o.lastIndexOf("/"),100):"",s.length==0)for(f=this.get_baseUrl().split(/\//),r=o.split(/\//),f[f.length-1]==""&&Array.removeAt(f,f.length-1),r[r.length-1]==""&&Array.removeAt(r,r.length-1),r[0]==""&&Array.removeAt(r,0),c=f.length,r[r.length-1].indexOf(".")==-1&&c--,h=r.length-c-1;h<r.length;h++)s+="/"+r[h];if(e=String.format("{0}help{1}",this.get_baseUrl(),s),e=String.format("{0}Help/Default.aspx?topic={1}",this.get_baseUrl(),encodeURI(e)),i){n.open(e);this.help();return}this._helpBar||(this._helpDiv=document.createElement("div"),document.body.appendChild(this._helpDiv),this._helpDiv.className="HelpBar",this._helpDiv.innerHTML=String.format('<div class="Title">{1}<\/div><iframe id="help" frameBorder="0"><\/iframe><div class="Buttons"><button onclick="$find(&quot;{0}&quot;).help()">{2}<\/button><button onclick="$find(&quot;{0}&quot;).help(true)">{3}<\/button><\/div>',this.get_id(),t.Bar.HelpLink,t.Bar.HelpCloseButton,t.Bar.HelpFullScreenButton),this._helpFrame=$get("help",this._helpDiv),this._helpBar=$create(AjaxControlToolkit.AlwaysVisibleControlBehavior,{HorizontalSide:AjaxControlToolkit.HorizontalSide.Right,VerticalSide:AjaxControlToolkit.VerticalSide.Top,HorizontalOffset:18,VerticalOffset:30},null,null,this._helpDiv),Sys.UI.DomElement.setVisible(this._helpDiv,!1));Sys.UI.DomElement.setVisible(this._helpDiv,!Sys.UI.DomElement.getVisible(this._helpDiv));Sys.UI.DomElement.getVisible(this._helpDiv)&&(this._helpFrame.src==""&&(this._helpFrame.src=e),this._helpBar._reposition())}};i.registerClass("Web.Membership",Sys.Component);Type.registerNamespace("Web");Web.MembershipManager=function(n){Web.MembershipManager.initializeBase(this,[n])};Web.MembershipManager.prototype={get_servicePath:function(){return this._servicePath},set_servicePath:function(n){this._servicePath=n},get_baseUrl:function(){return this._baseUrl},set_baseUrl:function(n){this._baseUrl=n},initialize:function(){Web.MembershipManager.callBaseMethod(this,"initialize")},dispose:function(){Web.MembershipManager.callBaseMethod(this,"dispose")},updated:function(){var n;Web.MembershipManager.callBaseMethod(this,"updated");var t=this.get_element(),i=$appfactory.mobile,r=Web.MembershipResources.Manager,u=this.get_baseUrl();i?$(String.format('<div data-flow="NewRow"><div data-activator="Tab|{0}">    <div id="membershipUsers"><\/div> <\/div> <div data-activator="Tab|{1}">    <div id="membershipRoles"><\/div><\/div><div data-activator="Tab|{2}">    <div id="membershipRoleUsers"><\/div><\/div><\/div>',r.UsersTab,r.RolesTab,r.UsersInRole)).appendTo(t):(Sys.UI.DomElement.addCssClass(t,"MembershipManager"),n=new Sys.StringBuilder,n.append('<div class="TabContainer" id="MembershipManager1_SecurityTabs" style="visibility:hidden;">'),n.append('<div id="MembershipManager1_SecurityTabs_header">'),n.append(String.format('<span id="__tab_MembershipManager1_SecurityTabs_UsersTab">{0}<\/span><span id="__tab_MembershipManager1_SecurityTabs_RolesTab">{1}<\/span>',r.UsersTab,r.RolesTab)),n.append('<\/div><div id="MembershipManager1_SecurityTabs_body">'),n.append('<div id="MembershipManager1_SecurityTabs_UsersTab" style="display:none;visibility:hidden;">'),n.append('<div id="MembershipManager1_SecurityTabs_UsersTab_Users"><\/div>'),n.append('<\/div><div id="MembershipManager1_SecurityTabs_RolesTab" style="display:none;visibility:hidden;">'),n.append('<div id="MembershipManager1_SecurityTabs_RolesTab_Roles"><\/div>'),n.append('<div id="MembershipManager1_SecurityTabs_RolesTab_UsersInRoles" style="margin-top: 8px"><\/div>'),n.append("<\/div>"),n.append("<\/div>"),n.append("<\/div>"),t.innerHTML=n.toString());$create(Web.DataView,{baseUrl:u,controller:"aspnet_Membership",id:"MembershipManager1_SecurityTabs_UsersTab_UsersExtender",pageSize:10,servicePath:this.get_servicePath(),showActionBar:!0,viewId:null,showSearchBar:!0,showFirstLetters:!0,tags:"multi-select-none"},null,null,i?$("#membershipUsers")[0]:$get("MembershipManager1_SecurityTabs_UsersTab_Users",t));i||$create(AjaxControlToolkit.TabPanel,{headerTab:$get("__tab_MembershipManager1_SecurityTabs_UsersTab",t)},null,{owner:"MembershipManager1_SecurityTabs"},$get("MembershipManager1_SecurityTabs_UsersTab",t));$create(Web.DataView,{baseUrl:u,controller:"aspnet_Roles",id:"MembershipManager1_SecurityTabs_RolesTab_RolesExtender",pageSize:5,servicePath:this.get_servicePath(),showActionBar:!0,viewId:null,showSearchBar:!0,tags:"multi-select-none"},null,null,i?$("#membershipRoles")[0]:$get("MembershipManager1_SecurityTabs_RolesTab_Roles",t));$create(Web.DataView,{baseUrl:u,controller:"aspnet_Membership",filterFields:"RoleId",filterSource:"MembershipManager1_SecurityTabs_RolesTab_RolesExtender",id:"MembershipManager1_SecurityTabs_RolesTab_UsersInRolesExtender",pageSize:5,servicePath:this.get_servicePath(),showActionBar:!0,viewId:"usersInRolesGrid",autoHide:1,showSearchBar:!0,showFirstLetters:!0,tags:"multi-select-none"},null,null,i?$("#membershipRoleUsers")[0]:$get("MembershipManager1_SecurityTabs_RolesTab_UsersInRoles",t));i||($create(AjaxControlToolkit.TabPanel,{headerTab:$get("__tab_MembershipManager1_SecurityTabs_RolesTab",t)},null,{owner:"MembershipManager1_SecurityTabs"},$get("MembershipManager1_SecurityTabs_RolesTab",t)),$create(AjaxControlToolkit.TabContainer,{activeTabIndex:0,clientStateField:$get("MembershipManager1_SecurityTabs_ClientState",t)},null,null,$get("MembershipManager1_SecurityTabs",t)))}};Web.MembershipManager.registerClass("Web.MembershipManager",Sys.UI.Behavior);Sys.Extended&&typeof AjaxControlToolkit=="undefined"&&(AjaxControlToolkit=Sys.Extended.UI);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded()})();